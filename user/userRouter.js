// ********************************************************
// Import Express and external middleware
// ********************************************************
const express = require('express');

// ********************************************************
// Set up express router
// ********************************************************
const router = express.Router();

// ********************************************************
// Import database access
// ********************************************************
const sdb = require('../data/helpers/userModel');

// ********************************************************
//Import custom middleware
// ********************************************************
const {restricted} = require('../middleware/custom');

// ********************************************************
// Export router
// ********************************************************
module.exports = router;

// ********************************************************
// GET /api/users
// ********************************************************
router.get('/', restricted, (req, res) => {
  sdb.find()
    .then(users => {
      res.json(users);
    })
    .catch(err => res.send(err));
});